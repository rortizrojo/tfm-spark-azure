node {
    stage('Preparation') { // for display purposes
        git branch: 'hiveLoad',
                credentialsId: 'gitlab-credentials',
                url: 'https://gitlab.com/rortizrojo/tfm-spark-azure.git'
    }
    stage('Subida de fichero') {
        sh """
            cluster_info=`az hdinsight list --resource-group  grupoRecursosTfm`
            cluster_name=`echo \$cluster_info | jq -r ".[0].id"`
            sshUser=`echo \$cluster_info | jq -r ".[0].properties.computeProfile.roles[0].osProfile.linuxOperatingSystemProfile.username"`
            ssh \${sshuser}@\${cluster_name}-ssh.azurehdinsight.net
            echo "Path: \$DATA_LAKE_MAIN_PATH"     
        """
    }
}